<!DOCTYPE html>
<html>
  <head>
    <title>3 - Basic Searching</title>
    <base href="./">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="wysiwiki/wysiwiki.css" type="text/css" />
    <link rel="stylesheet" href="style.css" type="text/css" />    
    <link rel="shortcut icon" href="favicon.ico" />    
    <script src="wysiwiki/wysiwiki.js"></script>
  </head>
  <body>
    <header><a rel='author' href='https://www.canterbury.ac.nz/nzilbb/'><img src='nzilbb.svg' alt='Te KƒÅhui Roro Reo | The New Zealand Institute of Language, Brain and Behaviour' title='üÑØ NZILBB'></a></header>
    <div id="main">
      <aside></aside>
      <article>
<h2>3 - Basic Searching</h2>
 <p>Now that you have some transcripts in your database, we'll try out LaBB-CAT's search functions a little.</p>
 <p>Searching broadly involves the following steps:</p>
 <ol>
  <li>selecting participants whose utterances you want to search,&nbsp;</li>
  <li>specifying one or more patterns to search for, and</li>
  <li>exploring or extracting the search results.</li></ol>
<hr>
 <p>&nbsp;We'll start with a very simple search - all the instances of the word ‚Äúthe‚Äù uttered by monolingual English-speaking males.</p>
 <ol>
  <li>In LaBB-CAT, click on the <i>participants</i> link on the menu.&nbsp;
  <br>This takes you to the <i>Participants</i> page you have already seen in a previous exercise, where you can list participants and filter them by their attributes. You can see various participant attributes listed across top of the page.
 <ul>
  <li>We're interested in male participants, so under the word <i>Gender</i>, select <i>M</i>.&nbsp;
  <br>The page will then display a list of all the male participants in the database.</li>
  <li>We want the participants who speak only English, so enter the following regular expression under <i>Languages</i>:&nbsp;
  <br><code>^English$</code>
  <br>This pattern, starting with ‚Äú^‚Äù and ending with ‚Äú$‚Äù, means ‚Äúmatch only values that <strong>start and end</strong> with the word ‚ÄòEnglish‚Äô" - i.e. English is the only word mentioned.&nbsp;
  <br>The page will then display a list of male participants who list only <i>English</i> as their language.</li></ul></li>
  <li>Click <i>Layered Search</i> at the top.&nbsp;
  <br>You will see the participants you selected listed at the top, followed by a list of layers (which we'll ignore for now). Below that, there's a heading <i>Search Matrix</i> with various controls. This is the ‚Äòsearch matrix‚Äô, although it doesn't look much like a matrix yet, because it's only one layer high and one word wide‚Ä¶</li>
  <li>In the box labelled ‚Äòregular expression‚Äô under the word <i>orthography</i> type the word <code>the</code>&nbsp;
  <br><img src="./orthography-the.png" alt="A border labelled 'orthography' containing a dropdown box with 'matches' selected, followed by a box containg the word 'the'"></li>
  <li>Now click the <i>Search</i> button at the bottom.&nbsp;
  <br>A progress bar will appear, and then shortly after that, a new window will open, which has a list of search results in it. Your browser's popup-blocker might prevent the results page from opening ‚Äì you can fix that either by allowing the popups in your browser, or by clicking the <i>Display results</i> link that appears after the search finishes.</li>
  <li>Each match is highlighted and shown within a few words context. Click on the first match.&nbsp;
  <br>You will see that the interactive transcript page opens in a new browser tab, with the match at the top, and highlighted. You will also see that all the other matches from the same transcript are also highlighted.</li>
  <li>We've already seen what can be done in the interactive transcript page, so close the tab to return to the results page.</li>
  <li>Each result line has a ticked checkbox next to it. Scroll to the bottom of the list.&nbsp;
  <br>You'll see that there are several buttons at the bottom, which perform operations on the ticked results <i>CSV Export</i>, <i>Utterance Export</i>, and <i>Audio Export</i> (among others).</li>
  <li>Untick the <i>Select all results</i> checkbox, and then tick a handful of results in the list.&nbsp;
  <br><i>Tip:</i> You can select a group of matches by ticking the first one, and then holding down the <i>Shift</i> key while ticking the last one.</li>
  <li>Hover the mouse pointer over the <i>Prefix Names</i> checkbox to see what this option does, and then tick it.</li>
  <li>Click the <i>Audio Export</i> button.</li>
  <li>Save and open the resulting zip file.&nbsp;
  <br>You'll see that the files are systematically named to include:
 <ul>
  <li>the result number,</li>
  <li>the name of the transcript, and</li>
  <li>the start and end time of the extracted utterance.</li></ul></li>
  <li>Now go back to the results page and click the <i>Utterance Export</i> button.</li>
  <li>Save and open the resulting zip file.&nbsp;
  <br>You'll see that the TextGrid names match the audio file names in the previous zip file.</li>
  <li>Open one of the TextGrids in Praat.&nbsp;
  <br>You'll see that, in addition to the utterance and word tiers, there's also a <i>target</i> tier which marks the words that matched the search.</li>
  <li>Back on the results page, click the <i>CSV Export</i> button.</li>
  <li>Save the resulting file, and open it.&nbsp;
  <br>You may have to specify some import options, in which case it may be handy to know that the field separator is comma, and the fields are quoted by speech marks.&nbsp;
  <br><i>Tip:</i> If you're using Microsoft Excel and you find it doesn't open all the columns correctly:
 <ol>
  <li>Create a new workbook in Excel.</li>
  <li>Click the <i>Data</i> tab.</li>
  <li>On the <i>Get External Data</i> ribbon click <i>From Text</i>.</li>
  <li>Select the CSV file you downloaded.</li>
  <li>Select <i>Delimited</i> and click <i>Next</i>.</li>
  <li>Ensure <i>Comma</i> is the only delimiter ticked and click <i>Next</i>.</li>
  <li>Click <i>Finish</i> and then <i>OK</i>.&nbsp;
  <br>
  <br>You will see a spreadsheet with one line per selected result, and various columns containing information about the speaker, the corpus, the match line and word, and a URL to the interactive transcript for the match.&nbsp;
  <br>With this spreadsheet, you can work ‚Äòoffline‚Äô with the results, tagging them, computing statistics in Excel, R, or any other program that can work with CSV files. There are a few more uses for the CSV results files, which are dealt with in a separate tutorial‚Ä¶</li></ol></li>
  <li>Close the CSV file, and the results page, and go back to the search matrix page.&nbsp;
  <br>
  <br>We've seen that you can search for exact word matches, but you can also search for patterns, using ‚Äòregular expressions‚Äô. Now we're going to search for words <i>beginning with</i> ‚Äúthe‚Ä¶‚Äù</li>
  <li>Change the <i>orthography</i> search text to <code>the.*</code>&nbsp;
  <br>(i.e. after the word ‚Äúthe‚Äù, append a full-stop and an asterisk.&nbsp;
  <br><img src="./starts-the.png" alt="A frame labelled 'orthography' with a dropdown box with 'matches' selected, followed by a box containing: the.*">&nbsp;
  <br>The full-stop means ‚Äúany character at all‚Äù, and the asterisk means ‚Äúzero or more of the previous thing‚Äù, so <i>.*</i> means ‚Äúzero or more characters‚Äù.&nbsp;</li>
  <li>Click <i>Search</i>.
  <br>You will see that now the search results include the word ‚Äúthe‚Äù and also words like ‚Äúthen‚Äù, ‚Äúthere‚Äù, ‚Äúthey‚Äù, etc.&nbsp;</li>
  <li>Now go back to the search page, and change the asterisk to a plus-sign, which means ‚Äúone or more of the previous thing‚Äù
  <br><img src="./prefix-the.png" alt="A frame labelled 'orthography' with a dropdown box with 'matches' selected, followed by a box containing: the.+"></li>
  <li>Click <i>Search</i>.
  <br>You will see that now the search results exclude the word ‚Äúthe‚Äù, only including words where the initial ‚Äúthe‚Ä¶‚Äù is followed by at least one character.&nbsp;</li>
  <li>Now change your search by replacing the <code>e</code> in ‚Äúthe‚Äù with <code>[aeiou]</code> - so your search pattern will be <code>th[aeiou].+</code>
  <br>The square-brackets mean ‚Äúany one of the things inside the brackets‚Äù, so <code>[aeiou]</code> means ‚Äúany vowel‚Äù.</li>
  <li>Click <i>Search</i>.
  <br>You will now see that the results include words like ‚Äúthink‚Äù, ‚Äúthat‚Äù, ‚Äúthought‚Äù, etc.&nbsp;
  <br>
  <br><img src="./help-2.png" alt="?"> You can get more information about regular expressions by using the online help on the search page, and also by clicking the the <i>regular expressions</i> link above the search matrix.
  <br>
  <br>Up until now, we've only been matching against one word at a time. Now we're going to include patterns for a chain of words.</li>
  <li>On the search page, to the right of the search matrix, there's a <i>+ </i>button. Click it.
  <br><img src="./two-words-wide.png" alt="A frame labelled 'orthography' with 'matches th[aeiou'' inside, followed by a dropdown box with 'followed immediately bo' selected, followed by another frame labelled 'orthography' containing a 'matches' dropdown box and an empty 'regular expression' box">
  <br>Now you will see that our search matrix is one layer high by two words wide.&nbsp;</li>
  <li>Change the entries on the <i>orthography</i> layer so that it will match the word ‚Äúthe‚Äù followed immediately by a word that starts with a vowel, and click <i>Search</i>.</li>
  <li>Check the search results are giving you what you expected.&nbsp;</li>
  <li>Now search for ‚Äúthe‚Äù followed, within two words, by a word that starts with a vowel.&nbsp;</li>
  <li>Dream up some other searches that interest you, and try out other options on the search page.&nbsp;</li></ol>
 <p><img src="./help-2.png" alt="?"> If in doubt about a search option, try the online help page.</p>
 <p>Because we're searching by word orthography, you will have noticed that your searches for words starting with a vowel return words where the <i>spelling</i> starts with a vowel, but the <i>pronunciation</i> doesn't, e.g. ‚Äúone‚Äù, ‚Äúonce‚Äù, etc. In order to search by pronunciation, we need to add a layer of pronunciation annotations. &nbsp;We'll do that in the next exercise‚Ä¶</p>
 <p>&nbsp;</p></article>
      <nav>
        <iframe src="index.html" id="nav" name="nav"></iframe>
      </nav>
    </div>
    <footer><a rel='license' href='http://creativecommons.org/licenses/by-sa/2.0/'><img alt='CC-BY-SA Creative Commons Licence ' src='cc-by-sa.svg' title='This work is licensed under a Creative Commons Attribution-ShareAlike 2.0 Generic License' /></a></footer>
  </body>
</html>
