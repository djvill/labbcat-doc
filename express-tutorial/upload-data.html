<!DOCTYPE html>
<html>
  <head>
    <title>2 - Upload Data</title>
    <base href="./">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="wysiwiki/wysiwiki.css" type="text/css" />
    <link rel="stylesheet" href="style.css" type="text/css" />    
    <link rel="shortcut icon" href="favicon.ico" />    
    <script src="wysiwiki/wysiwiki.js"></script>
  </head>
  <body>
    <header><a rel='author' href='https://www.canterbury.ac.nz/nzilbb/'><img src='nzilbb.svg' alt='Te KƒÅhui Roro Reo | The New Zealand Institute of Language, Brain and Behaviour' title='üÑØ NZILBB'></a></header>
    <div id="main">
      <aside></aside>
      <article>
<h2>2 - Upload Data</h2>
 <p>Transcripts can be uploaded manually, one at a time, using the <i>upload transcripts</i> option in the <i>upload</i> menu.</p>
 <p>However, if you already have a collection of transcripts and media files (which we have for these exercises - download <a target="_blank" rel="noopener noreferrer" href="https://publicdata.canterbury.ac.nz/Research/NZILBB/labbcat/QuakeStories.zip">QuakeStories.zip</a> to get the workshop data), and they are systematically organised (which they are), you may be able to save some manual uploading work by uploading them using the ‚Äòbatch upload‚Äô utility.</p>
 <ol>
  <li>In LaBB-CAT, click the <i>upload</i> option on the menu.</li>
  <li>Click the <i>upload transcript batch</i> link.
  <br>This shows a window with a large blank area in the middle with various buttons above it.</li>
  <li>Open Windows Explorer or Finder, and navigate to the LaBB-CAT Workshop data folder.</li>
  <li>Drag the folder called ‚ÄúQuakeStories‚Äù, and drop it on to LaBB-CAT, on to the blank area below the buttons.
  <br>The previously blank area will contain a list of transcripts. Each transcript should have a value filled in for each column - <i>Transcript</i>, <i>Media</i>, <i>Corpus</i>, and <i>Episode</i>.</li>
  <li>Most of the transcripts are monologues, so set <i>Type</i> to <i>monologue</i> on the top left.</li>
  <li>Click the <i>Upload</i> button above the list.
  <br>You will see that in the <i>Status</i> column, the text changes to ‚ÄúUploading‚Ä¶‚Äù for the first transcript. The progress bar progresses, and once it's complete, the next transcript changes to ‚ÄúTransferring‚Äù, and so on.</li>
  <li>While the files are uploading, click <img src="help.png"> the online help link next to the upload transcript batch link you clicked above and read the conditions that must be met in order to use the batch uploader.</li>
  <li>Once the uploader is finished, you can verify that all the transcripts are there by clicking the <i>transcripts</i> option on the menu in LaBB-CAT.
  <br>You should see a list of twenty transcripts.</li>
  <li>Use the ‚ÄúTranscript‚Äù box to find <i>UC013AM_Dom.eaf</i>
  <br>(You can type just part of the name if you like)</li>
  <li>Click the <i>Attributes</i> button for <i>UC013AM_Dom.eaf</i>
  <br>(the one with the spanner/wrench icon).</li>
  <li>Change <i>type</i> to <i>interview</i> and click <i>Save</i>.</li>
  <li>Similarly, the following transcripts are interviews, so change their type accordingly
 <ul>
  <li>UC215YW_DanielaMaoate-Cox.eaf</li>
  <li>UC226AD.eaf</li></ul></li>
  <li>Below the transcript attributes, click the <i>Transcript</i> link.</li>
  <li>You will now see LaBB-CAT's 'interactive transcript' page for the transcript.
  <br>
  <br>At the top there is a heading, a list of speakers, and then below this, the lines from the transcript, their speakers in the margin. This includes the words the participants utter, and also any noises, comments, and other annotations that were put in the transcript in ELAN.
  <br>
  <br>In the top right corner are some playback controls; click the play button. You will see a shaded rectangle following the participant's speech.
  <br>
  <br>Try the other controls to see what they do.</li>
  <li>Now click on any word in the transcript.
  <br>You will see a menu appear, with options for the 'Utterance' (the line), and the word.
  <br>Click the play option in the menu to see what it does.</li>
  <li>Click on the <i>formats</i> link under the title.
  <br>You will see a menu, which includes various formats for exporting the transcript.</li>
  <li>Select <i>Plain Text Document</i></li>
  <li>Save the resulting file on your desktop, and then open it.
  <br>You will see the transcript in plain-text form.</li>
  <li>Click the <i>formats</i> link, and select the <i>Praat Text Grid</i> option.</li>
  <li>Save the resulting file on your desktop, and then open it with Praat.
  <br>
  <br>You will see that the TextGrid has various tiers, two for utterances (one for each speaker), and two for individual words (one for each speaker).
  <br>(You will see that each individual word has a 'default' alignment - i.e. the words are evenly spread out during the duration of the line they're in. It is possible to make these word alignments actually line up with the words in the audio signal, using forced aligment, which is the subject of another tutorial.)
  <br>
  <br>You can also open individual utterances in Praat directly from the transcript page, if you have Praat installed. But first, the LaBB-CAT/Praat integration has to be set up; this only has to be done once:</li>
  <li>On the top-right of the page, above the playback controls, there's a Praat icon - click it.</li>
  <li>Follow the instructions that appear (these vary depending on what web browser you use).
  <br>You may need to grant a browser extension permission to install, and it's possible you will need a connection to the internet in order to download this extension.
  <br>You also may be asked where Praat is installed; Navigate to the location where Praat is installed, and double-click the ‚ÄúPraat.exe‚Äù file (on some systems the file may simply be called "Praat"). The Praat program may open, and then immediately close, as LaBB-CAT tests it can communicate with Praat.
  <br>
  <br><img src="./help-1.png"> There are illustrated instructions for setting up Praat integration for each web browser in the online help for the transcript page; check there if you run into problems.
  <br>
  <br>Now Praat integration has been set up, and you should be able to access Praat options in the transcript page from now on‚Ä¶</li>
  <li>Click on a line in the transcript, and select the <i>Open Text Grid in Praat</i> option on the menu.
  <br>Praat should open, and show you a spectrogram of the line's audio, with a TextGrid below that includes a tier for the utterance, and another tier for individual word alignments. You could manually align them here, but it's much more efficient to use HTK to force-align the utterances. Forced alignment is the subject of another tutorial‚Ä¶</li></ol>
<h3>Participant Data Import</h3>
 <p>The transcripts are now in the database, but the meta-data for the participants hasn't been set yet (because it's not contained in the ELAN files). We could manually add this for each speaker, but fortunately we have it stored in a spreadsheet (actually, a CSV text file) that we can upload in one go.</p>
 <ol>
  <li>In LaBB-CAT, click the <i>upload</i> option on the menu.</li>
  <li>Select the <i>upload participant data</i> option.</li>
  <li>Click <i>Choose File</i>, and select the file in the LaBB-CAT Exercises data folder called ‚Äúparticipants.csv‚Äù.</li>
  <li>Click <i>Upload</i></li>
  <li>You will now see a list of the columns from the spreadsheet.
  <br>Firstly, ensure that the <i>Participant identity column</i> is set to <i>name</i>. This ensures that the "name" column in the spreadsheet will be used to match names of participants in the LaBB-CAT database.</li>
  <li>Below that is listed each column from the spreadsheet, with an arrow pointing to a dropdown box. The box contains various options, including each of the participant attributes set up in LaBB-CAT, an <i>ignore</i> option, and <i>create a new attribute</i> option.
  <br>Most likely, the correct options are already selected, as we've already set up the correct participant attributes, but just check that they are as follows:
  <br>
 <ul>
  <li>The CSV column <strong>name:</strong> ‚Üí <i>ignore</i> because it's the <i>Participant Identity Column</i> identified above</li>
  <li>The CSV column <strong>gender:</strong> ‚Üí the <i>Gender</i> LaBB-CAT attribute</li>
  <li>The CSV column <strong>age_category:</strong> ‚Üí the <i>create a new attribute called</i> option, and set the <strong>Label</strong> to ‚ÄúAge‚Äù</li>
  <li>The CSV column <strong>ethnicity:</strong> ‚Üí the <i>create a new attribute called</i> option, and set the <strong>Label</strong> to ‚ÄúEthnicity‚Äù</li>
  <li>The CSV column <strong>grew_up:</strong> ‚Üí the <i>create a new attribute called</i> option, and set the <strong>Label</strong> to ‚ÄúCountry‚Äù</li>
  <li>The CSV column <strong>grew_up_region:</strong> ‚Üí the <i>create a new attribute called</i> option, and set the <strong>Label</strong> to ‚ÄúRegion‚Äù</li>
  <li>The CSV column <strong>grew_up_town:</strong> ‚Üí the <i>create a new attribute called</i> option, and set the <strong>Label</strong> to ‚ÄúTown‚Äù</li>
  <li>The CSV column <strong>languages_spoken:</strong> ‚Üí the <i>create a new attribute called</i> option, and set the <strong>Label</strong> to ‚ÄúLanguages‚Äù</li></ul></li>
  <li>Click <i>import</i>.
  <br>You should see a page with information about the import, including the columns that were ignored, and the number of participants that were added.
  <br>
  <br>To check the participant attributes really are now set:
  <br>&nbsp;</li>
  <li>Click the <i>participants</i> option on the menu.
  <br>You will see a list of speakers, and page links at the bottom.
  <br>The page also includes participant attribute values where they are known.</li>
  <li>Pick a speaker (e.g. <i>QB702_AnnaSoboleva</i>) and click their name.
  <br>You will see the participant attributes page with their details filled in (e.g. QB702_AnnaSoboleva is a female English/Russian speaker between 18 and 25 years old).
  <br>
  <br>By default, the new attributes are not flagged as searchable, so we will make a few of them searchable now.
  <br>&nbsp;</li>
  <li>Click the <i>participant attributes</i> link on the menu.
  <br>This will display a list of the participant meta-data fields.</li>
  <li>Ensure that <i>searchable</i> is set to <i>Searchable</i> for the following attributes:
 <ul>
  <li><i>gender</i></li>
  <li><i>age_category</i></li>
  <li><i>languages_spoken</i></li></ul></li>
  <li>Click the <i>Save Changes</i> button in the top right corner.</li>
  <li>Click <i>participants</i> on the top menu.
  <br>You will see that the searchable attributes are now listed with the participants.
  <br>
  <br>You can filter the list using the attribute headers at the top of the list.</li>
  <li>Under <i>Gender</i> click <i>F</i>
  <br>Now the list only shows female participants.</li></ol>
 <p>You now have a small database with a number of speakers in it, so we can start doing some searches and creating some annotations.
  <br>&nbsp;</p></article>
      <nav>
        <iframe src="index.html" id="nav" name="nav"></iframe>
      </nav>
    </div>
    <footer><a rel='license' href='http://creativecommons.org/licenses/by-sa/2.0/'><img alt='CC-BY-SA Creative Commons Licence ' src='cc-by-sa.svg' title='This work is licensed under a Creative Commons Attribution-ShareAlike 2.0 Generic License' /></a></footer>
  </body>
</html>
